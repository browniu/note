# 项目经历

## 小游戏-决战大明宫（策略类实时对战-独立开发

### 项目描述
策略类实时对战小游戏。前期使用css3结合Canvas进行混合技术开发。后期内容增加后，选择使用游戏引擎cocos2D进行重构。在原生开发经验的加持下，使用游戏引擎的体验非常顺畅。

### 项目职责
* 验证和总结出css+canvas混合开发游戏的方案
* 原生JS实现碰撞检测、手势拖拽、粒子动画、帧动画控制等游戏相关算法
* 调研游戏引擎环境，掌握Cocos2d的开发流程和优化
* 掌握通过WebSocket与服务器建立实时通信连接的技术方案

### 技术亮点
* 触摸交互逻辑：返回触摸点的位置上对应的Dom节点。`offsetParent` & `getBoundingClientRect` & `ElementFromPoint` 整合兼容方案
* 静态资源预加载逻辑。`Promise` & `new Image()`
* 对象池。每次优先调用对象池中的元素，没有闲置对象时再创建新的元素。使用完毕的元素立即存入对象池。实现对象池的容量在满足交互峰值的前提下最小。
* 音频处理。音效的重叠播放和音频元素的内存泄露问题。

## vue-router Encode编码

### 项目描述
因为在使用`react-router-dom`的过程中发现在路由传参包含特殊符号`/`时，无法正确接收。因为react-router会自动对参数部分采取`decodeURI`（这个API无法对/转译），这个时候`/`后面的会被解析成路径而造成数据不完整。

这时可能会想在发送参数前对其进行`encodeURIcomponent`手动编码（这个API可以对包括/在内的更多特殊字符进行转译），然后在接收时使用`decodeURIcomponent`进行手动解码，然而react-router进行的`decodeURI`解码是自动的（无法阻止），所以就会对参数进行多次解码，如果参数中包含类转译字段（%2F），在接收参数时就会把`%2F`经过两次解码解码成`/`符号。

### 项目职责
* 重构react-router的URI编码解码逻辑，解决参数中携带特殊符号的问题

### 技术亮点
* 基于原生`encodeURI`之上增加了对于`/[\/?#]/g`等对URI分割有影响的字符进行手动转译成16进制编码。
* 修改基础库`history`的编码逻辑为`decodeURIComponent`逻辑
* '在最理想的情况下，我们应该通过增加代码就能增加系统的功能，而不是修改现有的代码'。开发辅助处理插件，重写区别于`encodeURIComponent`的特殊符号编解码的逻辑
